```{r}
#most libraries derived from global.R

library(readxl)
library(skimr)

#Basic analysis of datasets
nhs_joined_1 <- read_csv(here("raw_data/nhs_data_joined1.csv"))
nhs_joined_2 <- read_csv(here("raw_data/nhs_data_joined2.csv"))
nhs_joined_3 <- read_csv(here("raw_data/nhs_data_joined3.csv"))

#checking consistency of rowbound csvs (do the columns match?)

compare_df_cols_same(nhs_joined_1, nhs_joined_2, nhs_joined_3)

#answer: Yes

#checking columns to spit into Workflow_Project

activity_by_board_age_sex <- read_csv(here("raw_data/activity_by_board_age_sex.csv"))
activity_by_board_and_specialty <- read_csv(here("raw_data/activity_by_board_and_specialty.csv"))
activity_by_board_deprivation <- read_csv(here("raw_data/activity_by_board_deprivation.csv"))
beds_by_nhs_board_of_treatment_and_specialty <- (here("raw_data/beds_by_nhs_board_of_treatment_and_specialty.csv"))
delayed_discharge_beddays_health_board <- (here("raw_data/delayed-discharge-beddays-health-board.csv"))
```
Focusing on these three dfs:

Activity by board age sex
delayed discharge beddays healthboard
activity by board deprivation
```{r}
glimpse (activity_by_board_age_sex)

```
column breakdown:

Of interest:

__Temporal__
Quarter: need to transfrom via str_remove year data OR if it makes more sense use lubridate quarter(date) function to normalize the "time" column"


__Demographic__
Age: need to mutate str_remove "years" figure out how to impute the range of 10-19 to something more meaningful OR transform other df age columns to this format and do counts for inputs to ggplot

Admission Type: patient info that may be useful for graphing, but not specifically

Episodes: need to correlate with demographic data
LengthOfEpisode: need to correlate with demographic data
AverageLengthofEpisode: need to correlate with demographic data

Stays: essential for correlating and answering question
LengthofStay: essential for correlating and answering question
AverageLengthofStay: essential for correlating and answering question
__GeoSpatial__
HB: (Health Board), can be joined to spatial data
Location: (Hospital), can be joined to spatial data


_Delayed_discharge_beddays






__AGE__

of our nhs_joined datasets


nhs_join_1 has "age" col, format = chr [range] and "years"

```{r}
nhs_joined_1 %>% 
  count(age)
```
 54% NA data
```{r}
nhs_joined_1 %>% 
  group_by(quarter, age) %>% 
  summarise(count = n())

```



nhs_join_2 has "age_group" col, format =  chr data --> values "All ages" "Under 5"

```{r}
nhs_joined_2 %>% 
  group_by(quarter, age_group) %>% 
  summarise(count = n())
```

```{r}
nhs_joined_2 %>% 
count(age_group)
```





nhs_joined_3

has age_group col, format = NA

```{r}
nhs_joined_3 %>% 
  count(age_group)
  
```


NA's are predominate in nhs_joined_2 and 3-- can't drop rows for any of the age columns

nhs_joined_1 has the most complete age data
joined_1 has quartile data select and merge joined 1


